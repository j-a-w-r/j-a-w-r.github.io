<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-04-10 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170410" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Jawr - Javascript i18n message generator</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1.min.js"></script>

              
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/j-a-w-r/jawr-main-repo">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2></h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2017-04-10
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 3.9
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                
      <li>
  
                          <a href="../introduction.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../features.html" title="Features">
          <i class="none"></i>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../changes.html" title="Change history">
          <i class="none"></i>
        Change history</a>
            </li>
                
      <li>
  
                          <a href="../team.html" title="The team">
          <i class="none"></i>
        The team</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../docs/servlet.html" title="The Jawr servlet">
          <i class="none"></i>
        The Jawr servlet</a>
            </li>
                
      <li>
  
                          <a href="../docs/descriptor_syntax.html" title="Descriptor syntax">
          <i class="none"></i>
        Descriptor syntax</a>
            </li>
                
      <li>
  
                          <a href="../docs/custom_bundles.html" title="Bundle definition">
          <i class="none"></i>
        Bundle definition</a>
            </li>
                
      <li>
  
                          <a href="../docs/source_ordering.html" title="Source order in bundles">
          <i class="none"></i>
        Source order in bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/cacheManager.html" title="Cache manager">
          <i class="none"></i>
        Cache manager</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_preprocessors.html" title="Global preprocessors">
          <i class="none"></i>
        Global preprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_postprocessors.html" title="Global postprocessors">
          <i class="none"></i>
        Global postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/postprocessors.html" title="Postprocessors">
          <i class="none"></i>
        Postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/generators.html" title="Generators">
          <i class="none"></i>
        Generators</a>
            </li>
                
      <li>
  
                          <a href="../docs/advanced_generators.html" title="Advanced generators">
          <i class="none"></i>
        Advanced generators</a>
            </li>
                
      <li>
  
                          <a href="../docs/license_files.html" title="Licenses in resources">
          <i class="none"></i>
        Licenses in resources</a>
            </li>
                
      <li>
  
                          <a href="../docs/taglibs.html" title="JSP Tag library">
          <i class="none"></i>
        JSP Tag library</a>
            </li>
                
      <li>
  
                          <a href="../docs/plain_html.html" title="Use in HTML pages">
          <i class="none"></i>
        Use in HTML pages</a>
            </li>
                
      <li>
  
                          <a href="../docs/modes.html" title="Debug and production modes">
          <i class="none"></i>
        Debug and production modes</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>i18n message generator</a>
          </li>
                
      <li>
  
                          <a href="../docs/variant_bundle.html" title="Variant bundles">
          <i class="none"></i>
        Variant bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/illegalBundleRequestHander.html" title="Jawr strict mode - Illegal bundle request handler">
          <i class="none"></i>
        Jawr strict mode - Illegal bundle request handler</a>
            </li>
                
      <li>
  
                          <a href="../docs/jmx_support.html" title="JMX Support">
          <i class="none"></i>
        JMX Support</a>
            </li>
                
      <li>
  
                          <a href="../docs/bundle_preprocessing.html" title="Bundle preprocessing">
          <i class="none"></i>
        Bundle preprocessing</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_maven_plugin.html" title="Jawr Maven plugin">
          <i class="none"></i>
        Jawr Maven plugin</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_ant_task.html" title="Jawr Ant task">
          <i class="none"></i>
        Jawr Ant task</a>
            </li>
                
      <li>
  
                          <a href="../migrationGuide.html" title="Migration Guide">
          <i class="none"></i>
        Migration Guide</a>
            </li>
                
      <li>
  
                          <a href="../migrationGitRepo.html" title="Github repository Migration Guide">
          <i class="none"></i>
        Github repository Migration Guide</a>
            </li>
                              <li class="nav-header">Integration</li>
                              
      <li>
  
                          <a href="../integration/augmenter.html" title="Add Jawr to your framework">
          <i class="none"></i>
        Add Jawr to your framework</a>
            </li>
                
      <li>
  
                          <a href="../integration/spring.html" title="Spring MVC">
          <i class="none"></i>
        Spring MVC</a>
            </li>
                
      <li>
  
                          <a href="../integration/facelets.html" title="Facelets Tag library">
          <i class="none"></i>
        Facelets Tag library</a>
            </li>
                
      <li>
  
                          <a href="../integration/wicket.html" title="Wicket">
          <i class="none"></i>
        Wicket</a>
            </li>
                
      <li>
  
                          <a href="../integration/grails.html" title="Grails plugin">
          <i class="none"></i>
        Grails plugin</a>
            </li>
                
      <li>
  
                          <a href="../integration/dwr.html" title="DWR">
          <i class="none"></i>
        DWR</a>
            </li>
                
      <li>
  
                          <a href="../integration/validator.html" title="Commons Validator - Struts">
          <i class="none"></i>
        Commons Validator - Struts</a>
            </li>
                              <li class="nav-header">Tutorials</li>
                              
      <li>
  
                          <a href="../tutorials/quickstart.html" title="Quick start">
          <i class="none"></i>
        Quick start</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrSmartbundling.html" title="How to use Jawr smart bundling feature">
          <i class="none"></i>
        How to use Jawr smart bundling feature</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToServeImage.html" title="How to use Jawr to serve image resources">
          <i class="none"></i>
        How to use Jawr to serve image resources</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrCssSkin.html" title="How to use Jawr to generate CSS skin">
          <i class="none"></i>
        How to use Jawr to generate CSS skin</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/jawrSpriteImage.html" title="How to generate Image sprites with Jawr">
          <i class="none"></i>
        How to generate Image sprites with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToGenerateBase64Image.html" title="How to generate base64 images in CSS with Jawr">
          <i class="none"></i>
        How to generate base64 images in CSS with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseGoogleClosureCompiler.html" title="How to use Google Closure Compiler with Jawr">
          <i class="none"></i>
        How to use Google Closure Compiler with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToSetJsEngine.html" title="How to set Javascript engine in Jawr">
          <i class="none"></i>
        How to set Javascript engine in Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToEnablePerformanceLogging.html" title="How to set performance logging in Jawr">
          <i class="none"></i>
        How to set performance logging in Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/faq_howto.html" title="FAQ-Howto">
          <i class="none"></i>
        FAQ-Howto</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/libraries.html" title="Using popular libraries">
          <i class="none"></i>
        Using popular libraries</a>
            </li>
                
      <li>
  
                          <a href="../docs/sampleApplications.html" title="Sample applications">
          <i class="none"></i>
        Sample applications</a>
            </li>
                              <li class="nav-header">API and sources</li>
                              
      <li>
  
                          <a href="../nonav/apidocs/index.html" title="JavaDocs">
          <i class="none"></i>
        JavaDocs</a>
            </li>
                
      <li>
  
                          <a href="../nonav/xref/index.html" title="Source XREF">
          <i class="none"></i>
        Source XREF</a>
            </li>
                              <li class="nav-header">Github repositories</li>
                              
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-main-repo" class="externalLink" title="Jawr main repository">
          <i class="none"></i>
        Jawr main repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-core" class="externalLink" title="Jawr core repository">
          <i class="none"></i>
        Jawr core repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-spring" class="externalLink" title="Jawr spring repository">
          <i class="none"></i>
        Jawr spring repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-wicket" class="externalLink" title="Jawr wicket repository">
          <i class="none"></i>
        Jawr wicket repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-grails" class="externalLink" title="Jawr grails repository">
          <i class="none"></i>
        Jawr grails repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-dwr2.x" class="externalLink" title="Jawr dwr2.x repository">
          <i class="none"></i>
        Jawr dwr2.x repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-dwr3.x" class="externalLink" title="Jawr dwr3.x repository">
          <i class="none"></i>
        Jawr dwr3.x repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-tools" class="externalLink" title="Jawr tools repository">
          <i class="none"></i>
        Jawr tools repository</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Javascript i18n message generator<a name="Javascript_i18n_message_generator"></a></h2>
<p>For any given rich application, chances are that many messages will be handled and displayed by javascript components. On the other hand, java web applications have always supported internationalization by means of ResourceBundles. Messages are stored in properties files which are versioned to different languages and stored using a file naming scheme that uses a base name for the ResourceBundle (such as &#x2018;messages&#x2019;) and suffixes that specify the different locales supported (such as &#x2018;messages_es&#x2019; for spanish).</p>
<p>There are a number of tag libraries (including JSTL) that support the use of such messages in JSP pages, but in order to use these messages in javascript there isn&#x2019;t a practical solution for transferring all messages to js variables. The messages generator in Jawr will do just that, generating automatically a javascript data structure that closely resembles the properties format. Each property is converted to a function that returns the message, supporting variable substitution with the standard ResourceBundle format. For example, if you message properties file (which could be names jsmessages.properties) contains the following messages:</p>

<div class="source">
<pre>    main.hello.world=Hello world!
    main.user.salutation=Welcome, {0}!
</pre></div>
<p>By using a generator, you will be able to access the messages from javascript like this:</p>

<div class="source">
<pre>        alert( messages.main.hello.world() );
        alert( messages.main .user.salutation('John') );        
</pre></div>
<p>The previous script would display two consecutive alert messages, showing the texts &#x2018;Hello world!&#x2019; and &#x2018;Welcome, John!&#x2019;.</p>
<p>Each bundle containing a messages generator can declare language variants, so Jawr will include a language specific version of the messages script for any given user. Continuing with the last example, if you had a jsmessages_es.properties file with spanish messages, such as the following:</p>

<div class="source">
<pre>    main.hello.world=Hola mundo!
    main.user.salutation=Bienvenido, {0}!
</pre></div>
<p>For any user using the es_ES locale, the bundle will contain the messages from this file rather than the ones in english. This way the scripts which access the properties will receive the spanish version messages. The way the locale is customizable to suit any application specific way of defining the language.</p>
<div class="section">
<h3>Mapping a message generator<a name="Mapping_a_message_generator"></a></h3>
<p>Message bundles are defined as mappings within a bundle, using a special syntax. Additionally, each language variant we want to use must be declared. A simple mapping would look as this:</p>

<div class="source">
<pre>    jawr.js.bundle.lib.id=/bundles/global.js
    jawr.js.bundle.lib.mappings=messages:com.myapp.jsmessages,/js/lib/**
</pre></div>
<p>As you can see, a mapping was added to &#x2018;messages:com.myapp.jsmessages&#x2019;. All mappings to message bundles will start with &#x2018;messages:&#x2019;, followed by a pipe character &#x2018;|&#x2019; separated list of the basenames for the ResourceBundles. In this case, the mapping refers to properties files located in the classpath under &#x2018;com/myap&#x2019; with the name &#x2018;jsmessages.properties&#x2019;.</p>
<p>The locale variants for this bundle will be found automatically by Jawr. In this example, Jawr will search for all available message bundles which match &#x2018;com/myapp/jsmessages[locale_variant].properties&#x2019;. Note that the locale, which will be used by default if the user&#x2019;s locale does not match any of the defined variants, will depend on the server&#x2019;s default locale. Also note that variants do not need to overwrite every property defined in the base locale messages file. The non overwritten properties will be read from the base file (which is the normal behavior when using java ResourceBundles).</p>
<div class="section">
<h4>Defining the message namespace.<a name="Defining_the_message_namespace."></a></h4>
<p>You probably noticed that in the previous example, when referencing the messages from javascript the properties were referenced using the name of the property preceded by &#x2018;messages.&#x2019;. Jawr will by default define a &#x2018;messages&#x2019; variable and add all properties as attributes for this variable. &#x2018;foo.bar&#x2019; is going to be referenced always as &#x2018;messages.foo.bar()&#x2019;. This is done so in order to avoid polluting the javascript properties namespace: imagine you had a function named foo() and a property named foo.hello: there would be a collision between the two names.</p>
<p>You can change the name used for the messages namespace to whatever you want. You will need to do it if you use two generators in the same page, because otherwise the messages namespace for the second generator will overwrite the first one&#x2019;s. So if you have a general messages ResourceBundle and you use others for page specific messages, you should declare those with a different namespace.</p>
<p>To define a namespace you enclose it in parentheses and add it to the end of the mapping:</p>

<div class="source">
<pre>    jawr.js.bundle.lib.mappings=messages:com.myapp.messages(mynamespace),/js/lib/**    
</pre></div>
<p>With this mapping, you would access the &#x2018;hello.world&#x2019; message using &#x2018;mynamespace.hello.world()&#x2019;.</p></div>
<div class="section">
<h4>Filtering messages.<a name="Filtering_messages."></a></h4>
<p>If you have each and every message for your application defined in a single ResourceBundle, it might be impractical to pass all the messages to javascript, since many will never be used. In this case, you can specify a name filter (such as javascript.messages) so that only properties for which the name starts with the filter are passed to javascript. To do that you enclose the filter in brackets and add it to the end of the mapping:</p>

<div class="source">
<pre>    jawr.js.bundle.lib.mappings=messages:com.myapp.messages[javascript.messages],/js/lib/**    
</pre></div>
<p>With this mapping, only the properties having a key that starts with javascript.messages (like &#x2018;javascript.messages.hello.world=Hello world!&#x2019;) will be included in the generated javascript.</p>
<p>If you define both a namespace and a filter, remember that the filter needs to be defined after the namespace:</p>

<div class="source">
<pre>    jawr.js.bundle.lib.mappings=messages:com.myapp.messages(mynamespace)[javascript.messages],/js/lib/**    
</pre></div></div>
<div class="section">
<h4>Locale resolution.<a name="Locale_resolution."></a></h4>
<p>There is not a universal way to determine which Locale to use for a given user. Many applications roll their own, so Jawr has a way to plug in a component to take care of custom Locale resolution strategies. Normally Jawr will use the request.getLocale() method to find out the user&#x2019;s Locale. If your app has different needs, you will have to create a class that implements a simple interface (net.jawr.web.resource.bundle.locale.LocaleResolver). This interface defines a single method:</p>

<div class="source">
<pre>   public abstract String resolveLocaleCode(HttpServletRequest request);  
</pre></div>
<p>Your implementation will take the request, determine the user&#x2019;s locale an return its String representation. Jawr will take care of the rest. To plug in your class, you will define it in the properties file under the key jawr.locale.resolver:</p>

<div class="source">
<pre>   jawr.locale.resolver=com.mypackage.myapp.MyLocaleResolverImplementation
</pre></div>
<p>Your class will be instantiated using reflection, so make sure it has a public default no-arg constructor.</p></div>
<div class="section">
<h4>Grails usage.<a name="Grails_usage."></a></h4>
<p>Grails users do not need to implement the LocaleResolver interface, since the default strategy used by Grails will be leveraged by Jawr.<br />The Jawr Grails plugin will override the default message generator to use the Jawr Grails one.<br />Keep in mind that the default qualified name for the Grails Resourcebundle is grails-app.i18n.messages, so map accordingly:</p>

<div class="source">
<pre>    jawr.js.bundle.lib.mappings=messages:grails-app.i18n.messages
</pre></div>
<p>Grails users can also use message from plugin using :</p>

<ul>
  
<li>the name of the plugin (myPlugin)</li>
  
<li>the plugin path (my-plugin-1.4.6)</li>
</ul>
<p>For example :</p>

<div class="source">
<pre>    jawr.js.bundle.lib.mappings=messages:messages:/plugins/my-plugin-1.4.6/grails-app/i18n/errors
</pre></div>
<p>Or </p>

<div class="source">
<pre>    jawr.js.bundle.lib.mappings=messages:messages:/plugins/myPlugin/grails-app/i18n/errors
</pre></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2017.
          All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
