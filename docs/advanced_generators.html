<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-04-10 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170410" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Jawr - Jawr Advanced Generators</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1.min.js"></script>

              
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/j-a-w-r/jawr-main-repo">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2></h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2017-04-10
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 3.9
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                
      <li>
  
                          <a href="../introduction.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../features.html" title="Features">
          <i class="none"></i>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../changes.html" title="Change history">
          <i class="none"></i>
        Change history</a>
            </li>
                
      <li>
  
                          <a href="../team.html" title="The team">
          <i class="none"></i>
        The team</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../docs/servlet.html" title="The Jawr servlet">
          <i class="none"></i>
        The Jawr servlet</a>
            </li>
                
      <li>
  
                          <a href="../docs/descriptor_syntax.html" title="Descriptor syntax">
          <i class="none"></i>
        Descriptor syntax</a>
            </li>
                
      <li>
  
                          <a href="../docs/custom_bundles.html" title="Bundle definition">
          <i class="none"></i>
        Bundle definition</a>
            </li>
                
      <li>
  
                          <a href="../docs/source_ordering.html" title="Source order in bundles">
          <i class="none"></i>
        Source order in bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/cacheManager.html" title="Cache manager">
          <i class="none"></i>
        Cache manager</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_preprocessors.html" title="Global preprocessors">
          <i class="none"></i>
        Global preprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_postprocessors.html" title="Global postprocessors">
          <i class="none"></i>
        Global postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/postprocessors.html" title="Postprocessors">
          <i class="none"></i>
        Postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/generators.html" title="Generators">
          <i class="none"></i>
        Generators</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Advanced generators</a>
          </li>
                
      <li>
  
                          <a href="../docs/license_files.html" title="Licenses in resources">
          <i class="none"></i>
        Licenses in resources</a>
            </li>
                
      <li>
  
                          <a href="../docs/taglibs.html" title="JSP Tag library">
          <i class="none"></i>
        JSP Tag library</a>
            </li>
                
      <li>
  
                          <a href="../docs/plain_html.html" title="Use in HTML pages">
          <i class="none"></i>
        Use in HTML pages</a>
            </li>
                
      <li>
  
                          <a href="../docs/modes.html" title="Debug and production modes">
          <i class="none"></i>
        Debug and production modes</a>
            </li>
                
      <li>
  
                          <a href="../docs/messages_gen.html" title="i18n message generator">
          <i class="none"></i>
        i18n message generator</a>
            </li>
                
      <li>
  
                          <a href="../docs/variant_bundle.html" title="Variant bundles">
          <i class="none"></i>
        Variant bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/illegalBundleRequestHander.html" title="Jawr strict mode - Illegal bundle request handler">
          <i class="none"></i>
        Jawr strict mode - Illegal bundle request handler</a>
            </li>
                
      <li>
  
                          <a href="../docs/jmx_support.html" title="JMX Support">
          <i class="none"></i>
        JMX Support</a>
            </li>
                
      <li>
  
                          <a href="../docs/bundle_preprocessing.html" title="Bundle preprocessing">
          <i class="none"></i>
        Bundle preprocessing</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_maven_plugin.html" title="Jawr Maven plugin">
          <i class="none"></i>
        Jawr Maven plugin</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_ant_task.html" title="Jawr Ant task">
          <i class="none"></i>
        Jawr Ant task</a>
            </li>
                
      <li>
  
                          <a href="../migrationGuide.html" title="Migration Guide">
          <i class="none"></i>
        Migration Guide</a>
            </li>
                
      <li>
  
                          <a href="../migrationGitRepo.html" title="Github repository Migration Guide">
          <i class="none"></i>
        Github repository Migration Guide</a>
            </li>
                              <li class="nav-header">Integration</li>
                              
      <li>
  
                          <a href="../integration/augmenter.html" title="Add Jawr to your framework">
          <i class="none"></i>
        Add Jawr to your framework</a>
            </li>
                
      <li>
  
                          <a href="../integration/spring.html" title="Spring MVC">
          <i class="none"></i>
        Spring MVC</a>
            </li>
                
      <li>
  
                          <a href="../integration/facelets.html" title="Facelets Tag library">
          <i class="none"></i>
        Facelets Tag library</a>
            </li>
                
      <li>
  
                          <a href="../integration/wicket.html" title="Wicket">
          <i class="none"></i>
        Wicket</a>
            </li>
                
      <li>
  
                          <a href="../integration/grails.html" title="Grails plugin">
          <i class="none"></i>
        Grails plugin</a>
            </li>
                
      <li>
  
                          <a href="../integration/dwr.html" title="DWR">
          <i class="none"></i>
        DWR</a>
            </li>
                
      <li>
  
                          <a href="../integration/validator.html" title="Commons Validator - Struts">
          <i class="none"></i>
        Commons Validator - Struts</a>
            </li>
                              <li class="nav-header">Tutorials</li>
                              
      <li>
  
                          <a href="../tutorials/quickstart.html" title="Quick start">
          <i class="none"></i>
        Quick start</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrSmartbundling.html" title="How to use Jawr smart bundling feature">
          <i class="none"></i>
        How to use Jawr smart bundling feature</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToServeImage.html" title="How to use Jawr to serve image resources">
          <i class="none"></i>
        How to use Jawr to serve image resources</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrCssSkin.html" title="How to use Jawr to generate CSS skin">
          <i class="none"></i>
        How to use Jawr to generate CSS skin</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/jawrSpriteImage.html" title="How to generate Image sprites with Jawr">
          <i class="none"></i>
        How to generate Image sprites with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToGenerateBase64Image.html" title="How to generate base64 images in CSS with Jawr">
          <i class="none"></i>
        How to generate base64 images in CSS with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseGoogleClosureCompiler.html" title="How to use Google Closure Compiler with Jawr">
          <i class="none"></i>
        How to use Google Closure Compiler with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToSetJsEngine.html" title="How to set Javascript engine in Jawr">
          <i class="none"></i>
        How to set Javascript engine in Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToEnablePerformanceLogging.html" title="How to set performance logging in Jawr">
          <i class="none"></i>
        How to set performance logging in Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/faq_howto.html" title="FAQ-Howto">
          <i class="none"></i>
        FAQ-Howto</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/libraries.html" title="Using popular libraries">
          <i class="none"></i>
        Using popular libraries</a>
            </li>
                
      <li>
  
                          <a href="../docs/sampleApplications.html" title="Sample applications">
          <i class="none"></i>
        Sample applications</a>
            </li>
                              <li class="nav-header">API and sources</li>
                              
      <li>
  
                          <a href="../nonav/apidocs/index.html" title="JavaDocs">
          <i class="none"></i>
        JavaDocs</a>
            </li>
                
      <li>
  
                          <a href="../nonav/xref/index.html" title="Source XREF">
          <i class="none"></i>
        Source XREF</a>
            </li>
                              <li class="nav-header">Github repositories</li>
                              
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-main-repo" class="externalLink" title="Jawr main repository">
          <i class="none"></i>
        Jawr main repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-core" class="externalLink" title="Jawr core repository">
          <i class="none"></i>
        Jawr core repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-spring" class="externalLink" title="Jawr spring repository">
          <i class="none"></i>
        Jawr spring repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-wicket" class="externalLink" title="Jawr wicket repository">
          <i class="none"></i>
        Jawr wicket repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-grails" class="externalLink" title="Jawr grails repository">
          <i class="none"></i>
        Jawr grails repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-dwr2.x" class="externalLink" title="Jawr dwr2.x repository">
          <i class="none"></i>
        Jawr dwr2.x repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-dwr3.x" class="externalLink" title="Jawr dwr3.x repository">
          <i class="none"></i>
        Jawr dwr3.x repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-tools" class="externalLink" title="Jawr tools repository">
          <i class="none"></i>
        Jawr tools repository</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Jawr Advanced Generators<a name="Jawr_Advanced_Generators"></a></h2>
<p>Please make sure to read the <a href="./generators.html">Jawr Generators documentation</a> before this page.<br />In the <a href="./generators.html">Jawr Generators documentation</a>, we have seen how to implement a basic generator.<br />Here we will see advanced features about the generators.</p>
<div class="section">
<h3>Initialization of a generator<a name="Initialization_of_a_generator"></a></h3>
<p>In the Jawr configuration file, we only define the class name of the generator.<br />Jawr provides some interfaces to initialize the generator.</p>
<p><img src="../images/generator/jawr\_initializingGenerator.png" alt="Initializing Generator class diagram" /> In the class diagram above, we can see that there are 3 main interfaces for generator initialization.</p>

<ul>
  
<li>
<p><b>net.jawr.web.resource.bundle.generator.ConfigurationAwareResourceGenerator</b><br />This interface provides a method to set the Jawr configuration in the generator.</p>
  
<div class="source">
<pre>        public void setConfig(JawrConfig config);
</pre></div></li>
</ul>

<ul>
  
<li><b>net.jawr.web.resource.bundle.generator.TypeAwareResourceGenerator</b><br />This interface provides a method to set the type of resource, which the generator will handle. This interface is useful if you are using one generator class to generate different type of resources (JS and CSS).</li>
</ul>
<p>For example : For a resource generator which is able to handle Javascript files and CSS files.<br /> If the type is &#x201c;js&#x201d; then the debugModePath will be &#x201c;/jawr_generator.js&#x201d;  else if the type is &#x201c;css&#x201d; the debugModePath will be &#x201c;/jawr_generator.css&#x201d;</p>

<div class="source">
<pre>            public void setResourceType(String resourceType);
</pre></div>

<ul>
  
<li>
<p><b>net.jawr.web.resource.bundle.generator.PostInitializationAwareResourceGenerator</b><br />This interface provides a method, which is called at the end of the generator initialization.</p>
  
<div class="source">
<pre>        public void afterPropertiesSet();
</pre></div></li>
</ul></div>
<div class="section">
<h3>Bundle processing aware generator<a name="Bundle_processing_aware_generator"></a></h3>
<p>Jawr allows you to create generators, which can listen to bundle processing event (start and end of the process).<br />For this, the generator should implements the following interface - <b>net.jawr.web.resource.bundle.lifecycle.BundlingProcessLifeCycleListener</b><br /> This interface provides two methods, which are called during the bundling process.</p>

<div class="source">
<pre>           /**
         * This method is called before the bundling process 
        */
         public void beforeBundlingProcess();


         /**
          * This method is called after the bundling process 
          */
         public void afterBundlingProcess();
</pre></div></div>
<div class="section">
<h3>Locale aware generator<a name="Locale_aware_generator"></a></h3>
<p>Jawr allows you to create generators, which can create resources depending on the user locale.<br />There is one locale aware generator, which is already provided In Jawr, and which handles i18n message resources :</p>

<ul>
  
<li><b>i18n messages script generator</b> generates javascript code with locale specific variants which are loaded depending on the user&#x2019;s specific language. Full documentation is <a href="./messages_gen.html">here</a>.</li>
</ul>
<p>So Jawr provides a mechanism to define a generator which can generate resources with locale specific variants. You will find below the class diagram for the locale aware resource generator.</p>
<p><img src="../images/generator/jawr\_variantResourceGenerator.png" alt="Locale Resource Generator class diagram" /></p>

<ul>
  
<li>
<p><b>net.jawr.web.resource.bundle.generator.LocaleAwareResourceGenerator</b><br />This interface provides a method, which is called to know what are the available locale variants for a path.</p>
  
<div class="source">
<pre>        public List getAvailableLocales(String mapping);
</pre></div></li>
</ul>
<p>For example, if you have 3 differents locale variant for a CSS  stylesheet like:<br /> general.css, general_fr.css, general_en.css</p>
<p>Your generator must return a list of String corresponding to the  available locale variants, in our case : (&quot;&#x201c;, &#x201d;fr&#x201c;, &#x201d;en&quot;)</p></div>
<div class="section">
<h3>Variant Resource generator<a name="Variant_Resource_generator"></a></h3>
<p>Since the version 3.3, Jawr is able to generate variant bundle contents. Like for locale aware bundles, Jawr is able to generate different bundle depending on request header, attributes, parameters, cookies&#x2026; So Jawr is for example able to generate bundle depending on the browser.</p>
<p><img src="../images/variants/variantBundleGenerator.jpg" alt="Variant Bundle generator class diagram" /> - <b>net.jawr.web.resource.bundle.generator.variant.VariantResourceGenerator</b><br /> This interface provides a method, which is called to know what are  the available variants for a path.</p>

<div class="source">
<pre>            /**
             * Returns the map of available variant for a resource.
             * The key of the map is the type of variant (for ex: locale, skin...)
             * The values associated are the list of variant for the type. 
             * @param resource the resource name
             * @return the map of available variant for a resource 
             */
            Map getAvailableVariants(String resource);
</pre></div>
<p>This method defines the map of variants available for a  specific resource. For the returned map of variants, the key is the  variant type, and the value is the VariantSet.</p>
<p>For more information about variant bundle, please take a look at the  <a href="./variant_bundle.html">documentation about variant bundle</a>.</p></div>
<div class="section">
<h3>CSS Resource generator<a name="CSS_Resource_generator"></a></h3>
<p>As for every resource, Jawr allows you to create a generator for the CSS files.<br />One of the particularity of the CSS resources, is that they have references to images. </p>
<p>With Jawr, you are free to define a CSS Resource generator, which is also an Image Resource generator.&#xa0; If your CSS generator is able to handle generated image resources, it must implements <b>net.jawr.web.resource.bundle.generator.StreamResourceGenerator</b></p>
<p>For example, you can have a CSS resource which is defined in the classpath. This CSS can have references to images which are also retrieved from the classpath. So here you define that your CSS resource generator will also handle CSS images. All references to images will be handled by the CSS resource generator.</p>
<p>You will find below the class diagram for Css Resource Generator [../images/generator/jawr_cssGenerator.png] CSS Generator class diagram</p>

<ul>
  
<li>
<p><b>net.jawr.web.resource.bundle.generator.CssResourceGenerator</b><br />This interface is implemented by the resource generator, which generates CSS resources.</p>
  
<div class="source">
<pre>        public boolean isHandlingCssImage();
</pre></div></li>
</ul>
<p>This method must return true if the CSS image defined in the  generated CSS resource are handled by the CSS generator.</p>
<p>For example, If <b>myCssGen</b> is the prefix of the resource  generator, all CSS image which are defined in the CSS resources,  will be prefixed by <b>myCssGen</b>.  If in the generated CSS resource, a CSS image is referenced as</p>
<p><b>background-image : url(&#x2018;/myImg/temp/myIcon.png&#x2019;)</b></p>
<p>Then, the image path will be interpreted as :</p>
<p><b>background-image : url(&#x2018;myGen:/myImg/temp/myIcon.png&#x2019;)</b></p>
<p><b>Important note :</b> If your generator handle CSS resources, you are  not forced to implement the  <b>net.jawr.web.resource.bundle.generator.CssResourceGenerator</b> interface.  You will need implement it only if your CSS generator is able to  handle CSS images.</p></div>
<div class="section">
<h3>Generator Resource mapping<a name="Generator_Resource_mapping"></a></h3>
<p>There are three ways to map resources:</p>

<ul>
  
<li>Directly by resource path: simply type the relative path to the resource, starting at the root of the WAR file, as in: &#x2018;/js/foo.js&#x2019;.</li>
  
<li>By directory, non-recurring: add the path to a directory and every resource under it will be added to the bundle, as in: &#x2018;/js/&#x2019;.</li>
  
<li>By directory, recurring: same as before but adding &#x2018;**&#x2019; at the end. This will add every resource under the specified directory and any directory below it. For example: &#x2018;/js/**&#x2019;.</li>
</ul>
<p>For example:</p>

<div class="source">
<pre>            jawr.js.bundle.myBundle.id=/bundles/myBundle.js
            jawr.js.bundle.myBundle.mappings=/js/one.js,/js/tabview/**
</pre></div>
<p>In the above example, we have referenced the resource <b>/js/on.js</b>  directly, and we have also put all js files available under  <b>/js/tabview/</b> folder.</p>
<p>With the resource generator, you can achieve the same behaviours. By  default, the resource generator is only able to handle the direct  reference to a resource path, like in the example below :</p>

<div class="source">
<pre>            jawr.js.bundle.myBundle.id=/bundles/myBundle.js
            jawr.js.bundle.myBundle.mappings=myGen:/js/one.js
</pre></div>
<p>If you want to use the <i>directory</i> syntax for generated resource,  your generator must implement the interface  <b>net.jawr.web.resource.handler.reader.ResourceBrowser</b>, like the  <b>GeneratedResourceBrowser</b> interface defined below.</p>
<p><img src="../images/generator/jawr\_resourceBrowserGenerator.png" alt="Resource Browser interface" /></p>

<ul>
  
<li><b>net.jawr.web.resource.handler.reader.ResourceBrowser</b>  This interface is implemented by the generators, which are able  to handle hierarchical generated resource search.</li>
</ul>

<div class="source">
<pre>                public Set getResourceNames(String path);
</pre></div>
<p>This method returns a list of resources at a specified path  within the resources directory.</p>

<div class="source">
<pre>                public boolean isDirectory(String path);
</pre></div>
<p>Determines whether a given path is a directory.</p></div>
<div class="section">
<h3>Debug mode for generated Resource deployed in CDN<a name="Debug_mode_for_generated_Resource_deployed_in_CDN"></a></h3>
<p>Jawr allows you to reference bundled resources deployed in a content delivery network (CDN).<br />To achieve this, you need to use the properties <b>jawr.url.contextpath.override</b> and <b>jawr.url.contextpath.ssl.override</b>.<br />Even in debug mode, Jawr allows you to reference resources in a CDN using the property <b>jawr.url.contextpath.override.used.in.debug.mode</b>. </p>
<p>Jawr helps you to create the resources and the structure of the files to put in your CDN using the <a href="./bundle_preprocessing.html">build time processing feature</a>. When using the <a href="./bundle_preprocessing.html">build time processing feature</a> allows you to define the path used for storing the generated resources. </p>
<p>To define the path of a generated resource in debug mode, the generator must implement a specific interface.</p>

<ul>
  
<li><b>net.jawr.web.resource.bundle.generator.SpecificCDNDebugPathResourceGenerator</b></li>
</ul>
<p>This interface is implemented by the resource generators which are  able to define a specific path for the debug mode in the <b>build time bundle processing</b>.</p>

<div class="source">
<pre>            public String getDebugModeBuildTimeGenerationPath(String parameter);
</pre></div>
<p>This methods must return the path to use when creating a generated  resource in debug mode during the <b>build time bundle processing</b>.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2017.
          All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
