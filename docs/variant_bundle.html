<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-04-10 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170410" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Jawr - Variant bundle</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1.min.js"></script>

              
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/j-a-w-r/jawr-main-repo">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2></h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2017-04-10
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 3.9
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                
      <li>
  
                          <a href="../introduction.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../features.html" title="Features">
          <i class="none"></i>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../changes.html" title="Change history">
          <i class="none"></i>
        Change history</a>
            </li>
                
      <li>
  
                          <a href="../team.html" title="The team">
          <i class="none"></i>
        The team</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../docs/servlet.html" title="The Jawr servlet">
          <i class="none"></i>
        The Jawr servlet</a>
            </li>
                
      <li>
  
                          <a href="../docs/descriptor_syntax.html" title="Descriptor syntax">
          <i class="none"></i>
        Descriptor syntax</a>
            </li>
                
      <li>
  
                          <a href="../docs/custom_bundles.html" title="Bundle definition">
          <i class="none"></i>
        Bundle definition</a>
            </li>
                
      <li>
  
                          <a href="../docs/source_ordering.html" title="Source order in bundles">
          <i class="none"></i>
        Source order in bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/cacheManager.html" title="Cache manager">
          <i class="none"></i>
        Cache manager</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_preprocessors.html" title="Global preprocessors">
          <i class="none"></i>
        Global preprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_postprocessors.html" title="Global postprocessors">
          <i class="none"></i>
        Global postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/postprocessors.html" title="Postprocessors">
          <i class="none"></i>
        Postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/generators.html" title="Generators">
          <i class="none"></i>
        Generators</a>
            </li>
                
      <li>
  
                          <a href="../docs/advanced_generators.html" title="Advanced generators">
          <i class="none"></i>
        Advanced generators</a>
            </li>
                
      <li>
  
                          <a href="../docs/license_files.html" title="Licenses in resources">
          <i class="none"></i>
        Licenses in resources</a>
            </li>
                
      <li>
  
                          <a href="../docs/taglibs.html" title="JSP Tag library">
          <i class="none"></i>
        JSP Tag library</a>
            </li>
                
      <li>
  
                          <a href="../docs/plain_html.html" title="Use in HTML pages">
          <i class="none"></i>
        Use in HTML pages</a>
            </li>
                
      <li>
  
                          <a href="../docs/modes.html" title="Debug and production modes">
          <i class="none"></i>
        Debug and production modes</a>
            </li>
                
      <li>
  
                          <a href="../docs/messages_gen.html" title="i18n message generator">
          <i class="none"></i>
        i18n message generator</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Variant bundles</a>
          </li>
                
      <li>
  
                          <a href="../docs/illegalBundleRequestHander.html" title="Jawr strict mode - Illegal bundle request handler">
          <i class="none"></i>
        Jawr strict mode - Illegal bundle request handler</a>
            </li>
                
      <li>
  
                          <a href="../docs/jmx_support.html" title="JMX Support">
          <i class="none"></i>
        JMX Support</a>
            </li>
                
      <li>
  
                          <a href="../docs/bundle_preprocessing.html" title="Bundle preprocessing">
          <i class="none"></i>
        Bundle preprocessing</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_maven_plugin.html" title="Jawr Maven plugin">
          <i class="none"></i>
        Jawr Maven plugin</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_ant_task.html" title="Jawr Ant task">
          <i class="none"></i>
        Jawr Ant task</a>
            </li>
                
      <li>
  
                          <a href="../migrationGuide.html" title="Migration Guide">
          <i class="none"></i>
        Migration Guide</a>
            </li>
                
      <li>
  
                          <a href="../migrationGitRepo.html" title="Github repository Migration Guide">
          <i class="none"></i>
        Github repository Migration Guide</a>
            </li>
                              <li class="nav-header">Integration</li>
                              
      <li>
  
                          <a href="../integration/augmenter.html" title="Add Jawr to your framework">
          <i class="none"></i>
        Add Jawr to your framework</a>
            </li>
                
      <li>
  
                          <a href="../integration/spring.html" title="Spring MVC">
          <i class="none"></i>
        Spring MVC</a>
            </li>
                
      <li>
  
                          <a href="../integration/facelets.html" title="Facelets Tag library">
          <i class="none"></i>
        Facelets Tag library</a>
            </li>
                
      <li>
  
                          <a href="../integration/wicket.html" title="Wicket">
          <i class="none"></i>
        Wicket</a>
            </li>
                
      <li>
  
                          <a href="../integration/grails.html" title="Grails plugin">
          <i class="none"></i>
        Grails plugin</a>
            </li>
                
      <li>
  
                          <a href="../integration/dwr.html" title="DWR">
          <i class="none"></i>
        DWR</a>
            </li>
                
      <li>
  
                          <a href="../integration/validator.html" title="Commons Validator - Struts">
          <i class="none"></i>
        Commons Validator - Struts</a>
            </li>
                              <li class="nav-header">Tutorials</li>
                              
      <li>
  
                          <a href="../tutorials/quickstart.html" title="Quick start">
          <i class="none"></i>
        Quick start</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrSmartbundling.html" title="How to use Jawr smart bundling feature">
          <i class="none"></i>
        How to use Jawr smart bundling feature</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToServeImage.html" title="How to use Jawr to serve image resources">
          <i class="none"></i>
        How to use Jawr to serve image resources</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrCssSkin.html" title="How to use Jawr to generate CSS skin">
          <i class="none"></i>
        How to use Jawr to generate CSS skin</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/jawrSpriteImage.html" title="How to generate Image sprites with Jawr">
          <i class="none"></i>
        How to generate Image sprites with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToGenerateBase64Image.html" title="How to generate base64 images in CSS with Jawr">
          <i class="none"></i>
        How to generate base64 images in CSS with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseGoogleClosureCompiler.html" title="How to use Google Closure Compiler with Jawr">
          <i class="none"></i>
        How to use Google Closure Compiler with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToSetJsEngine.html" title="How to set Javascript engine in Jawr">
          <i class="none"></i>
        How to set Javascript engine in Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToEnablePerformanceLogging.html" title="How to set performance logging in Jawr">
          <i class="none"></i>
        How to set performance logging in Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/faq_howto.html" title="FAQ-Howto">
          <i class="none"></i>
        FAQ-Howto</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/libraries.html" title="Using popular libraries">
          <i class="none"></i>
        Using popular libraries</a>
            </li>
                
      <li>
  
                          <a href="../docs/sampleApplications.html" title="Sample applications">
          <i class="none"></i>
        Sample applications</a>
            </li>
                              <li class="nav-header">API and sources</li>
                              
      <li>
  
                          <a href="../nonav/apidocs/index.html" title="JavaDocs">
          <i class="none"></i>
        JavaDocs</a>
            </li>
                
      <li>
  
                          <a href="../nonav/xref/index.html" title="Source XREF">
          <i class="none"></i>
        Source XREF</a>
            </li>
                              <li class="nav-header">Github repositories</li>
                              
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-main-repo" class="externalLink" title="Jawr main repository">
          <i class="none"></i>
        Jawr main repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-core" class="externalLink" title="Jawr core repository">
          <i class="none"></i>
        Jawr core repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-spring" class="externalLink" title="Jawr spring repository">
          <i class="none"></i>
        Jawr spring repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-wicket" class="externalLink" title="Jawr wicket repository">
          <i class="none"></i>
        Jawr wicket repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-grails" class="externalLink" title="Jawr grails repository">
          <i class="none"></i>
        Jawr grails repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-dwr2.x" class="externalLink" title="Jawr dwr2.x repository">
          <i class="none"></i>
        Jawr dwr2.x repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-dwr3.x" class="externalLink" title="Jawr dwr3.x repository">
          <i class="none"></i>
        Jawr dwr3.x repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-tools" class="externalLink" title="Jawr tools repository">
          <i class="none"></i>
        Jawr tools repository</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Variant bundle<a name="Variant_bundle"></a></h2>
<p>One of the key features of Jawr is its ability to bundle resources and to provide variation of the same bundle depending on the user request.<br />A good example of variant bundle is the locale variant bundle generated by the <b>i18n messages script generator</b> (Full documentation of the message generator is <a href="./messages_gen.html">here</a>). These bundles have different content depending on the user locale.</p>
<p>So a variant bundle is a bundle which can have different content depending on the user request (cookie, parameter, browser type&#x2026;). Jawr provides 2 ways for the user to define variant bundles using the public Jawr API :</p>

<ul>
  
<li>Generators</li>
  
<li>PostProcessors</li>
</ul>
<div class="section">
<h3>Bundle variant map<a name="Bundle_variant_map"></a></h3>
<p>The main idea to understand is how variants are defined for a bundle. In Jawr, we are using a map of variants for a bundle. This map has as key the type of variant (locale, skin, browser, &#x2026;). The value associated is a <b>VariantKeySet</b>. A <b>VariantSet</b> is an object containing the set of values available for a defined variant type, and it contains also the default variant value to use.<br />I will discuss later about the default value strategy. For the rest of the document, I will notate the VariantSet content as [<b>&#x201c;defaultValue&#x201d;</b>, &#x201c;value1&#x201d;, &#x201c;value2&#x201d; ].<br />So here the VariantSet contains defaultValue, value1 and value2 and the value in bold is the default value.</p>
<p>To be clearer, we will take an example of a bundle name &#x201c;bundle1.js&#x201d;, which has 2 variant types: locale and browser.<br />In the following example, we have defined the default value as empty but we could have set it to any value of the variant set.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th><b>Variant type</b> </th>
      
<th><b>Variant set</b> </th>
      
<th><b>Default variant</b></th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>locale browser </td>
      
<td>&#x2019;&#x2018;,&#x2018;fr&#x2019;,&#x2018;en_US&#x2019; &#x2019;&#x2018;,&#x2018;IE6&#x2019;,&#x2018;IE7&#x2019;| &#x2019;&#x2019; </td>
    </tr>
  </tbody>
</table>
<p>In this example, the bundle &#x201c;bundle1&#x201d; will have 9 variant combinations :</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th><b>Locale variant</b> </th>
      
<th><b>Browser variant</b> </th>
      
<th><b>Variant suffix</b> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>&#x2019;&#x2018; &#x2019;&#x2018; &#x2019;&#x2018; &#x2018;fr&#x2019; &#x2018;fr&#x2019; &#x2018;fr&#x2019; &#x2018;en_US&#x2019; &#x2018;en_US&#x2019; &#x2018;en_US&#x2019; | &#x2019;&#x2018; &#x2018;IE6&#x2019; &#x2018;IE7&#x2019; &#x2019;&#x2018; &#x2018;IE6&#x2019; &#x2018;IE7&#x2019; &#x2019;&#x2018; &#x2018;IE6&#x2019; &#x2018;IE7&#x2019; | &#x2019;@@&#x2018; &#x2019;@@IE6&#x2018; &#x2019;@@IE7&#x2018; &#x2019;@fr@&#x2018; &#x2019;@fr@IE6&#x2018; &#x2019;@fr@IE7&#x2018; &#x2019;@en_US@&#x2018; &#x2019;@en_<a class="externalLink" href="mailto:US@IE6">US@IE6</a>&#x2018; &#x2019;@en_<a class="externalLink" href="mailto:US@IE7">US@IE7</a>&#x2019; </td>
    </tr>
  </tbody>
</table>
<p>It is important to understand that a bundle is defined with a map of variant, but for a specific request, there will be in one and only one combination of the variant bundle which will match.</p>
<p>You should also note that Jawr uses <b>&#x201c;@&#x201d;</b> as separator for variant values. The variant suffix will be appended to the variant bundle name to distinguish the variants of a bundle.</p>

<ul>
  
<li>Variant map concatenation</li>
</ul>
<p>The variant maps can be concatenated. Here are the rules for the  concatenation: If the variant map variantMap2 is concatenated  to variantMap1. - For each variant type of variant map 2, we will  check that the variant type exists in variantMap1. If it doesn&#x2019;t  exist we create a new entry in the result map containing as key the  variantType and as value the variantSet.</p>
<p>If it exist, we concatenate the VariantSets. The values of the  variant sets are concatenated, but if the 2 VariantSets have  different default values an exception is thrown, because Jaw is not  able to define what is the default value to use for this VariantSet.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th><b>VariantMap1</b> </th>
      
<th><b>VariantMap2</b> </th>
      
<th><b>Concatenation result</b> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>[&#x2018;locale&#x2019; : [<b>&#x2019;&#x2018;<b>, &#x2018;en_US&#x2019; ]] [&#x2018;locale&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;en_US&#x2019; ]] [&#x2018;locale&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;en_US&#x2019; ]; [&#x2018;browser&#x2019; : </b>&#x2019;&#x2018;<b>, &#x2018;IE7&#x2019;]] [&#x2018;locale&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;en_US&#x2019; ]; [&#x2018;browser&#x2019; : </b>&#x2018;IE6&#x2019;<b>, &#x2018;IE7&#x2019;]] | [] [&#x2018;browser&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;IE6&#x2019; ]] [&#x2018;browser&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;IE6&#x2019; ]] [&#x2018;browser&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;IE6&#x2019; ]] | [&#x2018;locale&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;en_US&#x2019; ]] [&#x2018;locale&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;en_US&#x2019; ]; &#x2018;browser&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;IE6&#x2019; ]] [&#x2018;locale&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;en_US&#x2019; ]; &#x2018;browser&#x2019; : [</b>&#x2019;&#x2019;</b>, &#x2018;IE6&#x2019;, &#x2018;IE7&#x2019; ]] An exception is thrown. The default values are not the same. </td>
    </tr>
  </tbody>
</table></div>
<div class="section">
<h3>Variant bundle and Generators<a name="Variant_bundle_and_Generators"></a></h3>
<p>Like for the MessageResourceGenerator, you can define your own generator which will can have different variant depending on some context. To define a generator, which is able to generate variant content, the generator must implement the interface <i>net.jawr.web.resource.bundle.generator.variant.VariantResourceGenerator</i>.</p>
<p><img src="../images/variants/variantBundleGenerator.jpg" alt="Variant Bundle generator class diagram" /> This interface defines one method which is :</p>

<div class="source">
<pre>        /**
         * Returns the map of available variant for a resource.
         * The key of the map is the type of variant (for ex: locale, skin...)
         * The values associated are the list of variant for the type. 
         * @param resource the resource name
         * @return the map of available variant for a resource 
         */
        Map getAvailableVariants(String resource);
</pre></div>
<p>So this method defines the map of variants available for a specific resource. For the returned map of variants, the key is the variant type, and the value is the VariantSet.</p>
<p>So the bundle will be able to initialize the available variants from the generator defined in the mapping. For instance, if you have a bundle whose the mapping is define like this :</p>

<div class="source">
<pre>        jawr.css.bundle.myBundle.id=/myBundle.css
        jawr.css.bundle.myBundle.mappings=/css/tree.css,myVariantGen1:/font.css,myVariantGen2:/panel.css
</pre></div>
<p>If <i>myVariantGen1</i> and <i>myVariantGen2</i> are some custom variant generators, the variant map of the bundle will be the concatenation of the variant map of each bundle.<br />To be clear, if the variant map for the resource <i>myVariantGen1:/font.css</i> is : [ &#x2018;locale&#x2019; : [<b>&#x2019;&#x2018;<b>, &#x2018;fr_FR&#x2019;]]<br />And the variant map for the resource <i>myVariantGen2:/panel.css</i> is : [&#x2018;browser&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;IE6&#x2019;]],<br />then the variant map for the bundle will be [ &#x2018;locale&#x2019; : [</b>&#x2019;&#x2018;<b>, &#x2018;fr_FR&#x2019;]; &#x2018;browser&#x2019; : [</b>&#x2019;&#x2019;</b>, &#x2018;IE6&#x2019;]].<br />For more detail about the variant map concatenation, please take a look to the dedicated section.</p></div>
<div class="section">
<h3>Variant bundle and Postprocessors<a name="Variant_bundle_and_Postprocessors"></a></h3>
<p>Jawr allows you to define variant through the post processor also. </p>
<p>To define a post processor which manage variant bundle, you must annotate the class with <i>@VariantPostProcessor</i>.</p>
<p>Here is an example of variant post processor declaration.</p>

<div class="source">
<pre>        /**
         * A variant post processor
         */
        @VariantPostProcessor
        public MyVariantPostProcessor implements ResourceBundlePostProcessor {
                ...
        }
</pre></div>
<p>When Jawr see you that there&#x2019;s a post processor in the building chain which is a variant post processor, Jawr calls the postprocessor with a flag on the postprocess context, to say that it&#x2019;s searching for the bundle variant. If no variants is define, the Jawr continues as usual. If the postprocessor set some variants in the bundle variant, in that case, Jawr will reprocess the bundle with all the variants.</p>
<p>To be able to handle the variants definition by the postprocessors, 3 methods have been added to the BundleProcessingStatus class.</p>

<div class="source">
<pre>        /**
         * Returns true if we are searching for post processor variants.
         * @return true if we are searching for post processor variants.
         */
        public boolean isSearchingPostProcessorVariants();

        /**
         * Add a post process variant
         * @param variantType the variant type
         * @param variantSet the variant set
         */
        public void adPostProcessVariant(String variantType, VariantSet variantSet);

        /**
         * Add a post process variant
         * @param variantType the variant type
         * @param variantSet the variant set
         */
        public void adPostProcessVariant(Map variants);
</pre></div>
<p><img src="../images/variants/postProcessorVariants.sqd.jpg" alt="Bundle post processing sequence diagram" /> The sequence diagram above gives an overview of what happens when the postprocessor defines some postprocessor variants.</p>
<p>The ResourceBundleHandler, which is responsible for creating the different bundles at server startup, iterates through each bundle.</p>

<ul>
  
<li>The ResourceBundleHandler initializes the BundleProcessingStatus and sets the flag indicating that we are searching for postprocessor variant.</li>
  
<li>Then the ResourceBundleHandler iterates on every variant configuration of the bundle</li>
  
<li>The ResourceBundleHandler calls the postprocessors with the current variant configuration.</li>
  
<li>The postprocessor adds postprocessor variants to the BundleProcessingStatus.</li>
  
<li>Then the ResourceBundleHandler checks if the are some postprocessor variants in the BundleProcessingStatus.
  
<ul>
    
<li>If it&#x2019;s not the case, it will create the postprocessed files of the bundle.</li>
  </ul></li>
  
<li>If there are some postprocessor variants, it concatenates the bundle variants with the variants found during the postprocessing.</li>
  
<li>The ResourceBundleHandler updates the BundleProcessingStatus to set the postprocessor variant search flag to false.</li>
  
<li>Then it reprocesses the bundle with the new variant combinations.</li>
</ul></div>
<div class="section">
<h3>Variant resolver<a name="Variant_resolver"></a></h3>
<p>As we have seen, Jawr is able to generate different bundle contents depending on a specific variant context.<br />The role of the VariantResolver is to define for a request, what is the current variant context.<br />You can only define <b>one</b> VariantResolver for a specific type.<br />Here is the list of methods to be implemented by a VariantResolver.</p>

<div class="source">
<pre>        /**
         * Resolves the variant to use for the user associated to a request.
         * @param request the request
         * @return A string identifying the variant.
         */
        String getVariantType();

        /**
         * Resolves the variant to use for the user associated to a request.
         * @param request the request
         * @return A string identifying the variant.
         */
        String resolveVariant(HttpServletRequest request); 

        /**
         * Returns the value to use for the variant from the list of variants available
         * @param variant the value of the variant
         * @param variantSet the available variantSet 
         * @return the value to use for the variant
         */
        String getAvailableVariant(String variant, VariantSet variantSet);              
</pre></div>

<ul>
  
<li>The method <b>getVariantType</b> returns the type of variant that the resolver is responsible for.</li>
  
<li>The method <b>resolveVariant</b> returns the value of the current variant for the request. It can take any information in the request (header, cookie, parameter) to define the current variant.</li>
  
<li>The method <b>getAvailableVariant</b> returns the value of the variant from the current value and from the available variant set.</li>
</ul>
<p>The Variant resolver is responsible for the default variant strategy. This means that the variant resolver is responsible to define what is the value to use if the variant doesn&#x2019;t exists in the VariantSet. If the VariantResolver doesn&#x2019;t find a suitable variant, it <b>must</b> returns the default variant.</p>
<p>To register your custom variant resolvers, you need to use the following Jawr configuration property :</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th><b>Property name</b> </th>
      
<th><b>Type</b> </th>
      
<th><b>Purpose</b> </th>
      
<th><b>Default value</b> </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>jawr.custom.resolvers </td>
      
<td>Comma separated list. </td>
      
<td>List of all the VariantResolver implementations you want to use. </td>
      
<td>None</td>
    </tr>
  </tbody>
</table></div>
<div class="section">
<h3>Custom CSS skin variant resolver<a name="Custom_CSS_skin_variant_resolver"></a></h3>
<p>Jawr provides by default a variant resolver for CSS skin, which determine the current CSS skin based on the <b>jawr.css.skin.cookie</b> property. You can define your own CSS variant resolver by setting the <b>jawr.css.skin.resolver</b> property to point to your class, which must extend <b>net.jawr.web.resource.bundle.generator.variant.css.AbstractCssSkinVariantResolver</b>. Then you need to define the following method in your class :</p>

<div class="source">
<pre>        /* (non-Javadoc)
         * @see net.jawr.web.resource.bundle.variant.VariantResolver#resolveVariant(javax.servlet.http.HttpServletRequest)
         */
        public abstract String resolveVariant(HttpServletRequest request);
</pre></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2017.
          All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
