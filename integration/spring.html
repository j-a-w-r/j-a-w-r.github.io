<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-04-10 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170410" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Jawr - Spring MVC integration</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1.min.js"></script>

              
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/j-a-w-r/jawr-main-repo">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2></h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2017-04-10
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 3.9
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                
      <li>
  
                          <a href="../introduction.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../features.html" title="Features">
          <i class="none"></i>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../changes.html" title="Change history">
          <i class="none"></i>
        Change history</a>
            </li>
                
      <li>
  
                          <a href="../team.html" title="The team">
          <i class="none"></i>
        The team</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../docs/servlet.html" title="The Jawr servlet">
          <i class="none"></i>
        The Jawr servlet</a>
            </li>
                
      <li>
  
                          <a href="../docs/descriptor_syntax.html" title="Descriptor syntax">
          <i class="none"></i>
        Descriptor syntax</a>
            </li>
                
      <li>
  
                          <a href="../docs/custom_bundles.html" title="Bundle definition">
          <i class="none"></i>
        Bundle definition</a>
            </li>
                
      <li>
  
                          <a href="../docs/source_ordering.html" title="Source order in bundles">
          <i class="none"></i>
        Source order in bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/cacheManager.html" title="Cache manager">
          <i class="none"></i>
        Cache manager</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_preprocessors.html" title="Global preprocessors">
          <i class="none"></i>
        Global preprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/global_postprocessors.html" title="Global postprocessors">
          <i class="none"></i>
        Global postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/postprocessors.html" title="Postprocessors">
          <i class="none"></i>
        Postprocessors</a>
            </li>
                
      <li>
  
                          <a href="../docs/generators.html" title="Generators">
          <i class="none"></i>
        Generators</a>
            </li>
                
      <li>
  
                          <a href="../docs/advanced_generators.html" title="Advanced generators">
          <i class="none"></i>
        Advanced generators</a>
            </li>
                
      <li>
  
                          <a href="../docs/license_files.html" title="Licenses in resources">
          <i class="none"></i>
        Licenses in resources</a>
            </li>
                
      <li>
  
                          <a href="../docs/taglibs.html" title="JSP Tag library">
          <i class="none"></i>
        JSP Tag library</a>
            </li>
                
      <li>
  
                          <a href="../docs/plain_html.html" title="Use in HTML pages">
          <i class="none"></i>
        Use in HTML pages</a>
            </li>
                
      <li>
  
                          <a href="../docs/modes.html" title="Debug and production modes">
          <i class="none"></i>
        Debug and production modes</a>
            </li>
                
      <li>
  
                          <a href="../docs/messages_gen.html" title="i18n message generator">
          <i class="none"></i>
        i18n message generator</a>
            </li>
                
      <li>
  
                          <a href="../docs/variant_bundle.html" title="Variant bundles">
          <i class="none"></i>
        Variant bundles</a>
            </li>
                
      <li>
  
                          <a href="../docs/illegalBundleRequestHander.html" title="Jawr strict mode - Illegal bundle request handler">
          <i class="none"></i>
        Jawr strict mode - Illegal bundle request handler</a>
            </li>
                
      <li>
  
                          <a href="../docs/jmx_support.html" title="JMX Support">
          <i class="none"></i>
        JMX Support</a>
            </li>
                
      <li>
  
                          <a href="../docs/bundle_preprocessing.html" title="Bundle preprocessing">
          <i class="none"></i>
        Bundle preprocessing</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_maven_plugin.html" title="Jawr Maven plugin">
          <i class="none"></i>
        Jawr Maven plugin</a>
            </li>
                
      <li>
  
                          <a href="../docs/jawr_ant_task.html" title="Jawr Ant task">
          <i class="none"></i>
        Jawr Ant task</a>
            </li>
                
      <li>
  
                          <a href="../migrationGuide.html" title="Migration Guide">
          <i class="none"></i>
        Migration Guide</a>
            </li>
                
      <li>
  
                          <a href="../migrationGitRepo.html" title="Github repository Migration Guide">
          <i class="none"></i>
        Github repository Migration Guide</a>
            </li>
                              <li class="nav-header">Integration</li>
                              
      <li>
  
                          <a href="../integration/augmenter.html" title="Add Jawr to your framework">
          <i class="none"></i>
        Add Jawr to your framework</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Spring MVC</a>
          </li>
                
      <li>
  
                          <a href="../integration/facelets.html" title="Facelets Tag library">
          <i class="none"></i>
        Facelets Tag library</a>
            </li>
                
      <li>
  
                          <a href="../integration/wicket.html" title="Wicket">
          <i class="none"></i>
        Wicket</a>
            </li>
                
      <li>
  
                          <a href="../integration/grails.html" title="Grails plugin">
          <i class="none"></i>
        Grails plugin</a>
            </li>
                
      <li>
  
                          <a href="../integration/dwr.html" title="DWR">
          <i class="none"></i>
        DWR</a>
            </li>
                
      <li>
  
                          <a href="../integration/validator.html" title="Commons Validator - Struts">
          <i class="none"></i>
        Commons Validator - Struts</a>
            </li>
                              <li class="nav-header">Tutorials</li>
                              
      <li>
  
                          <a href="../tutorials/quickstart.html" title="Quick start">
          <i class="none"></i>
        Quick start</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrSmartbundling.html" title="How to use Jawr smart bundling feature">
          <i class="none"></i>
        How to use Jawr smart bundling feature</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToServeImage.html" title="How to use Jawr to serve image resources">
          <i class="none"></i>
        How to use Jawr to serve image resources</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrCssSkin.html" title="How to use Jawr to generate CSS skin">
          <i class="none"></i>
        How to use Jawr to generate CSS skin</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/jawrSpriteImage.html" title="How to generate Image sprites with Jawr">
          <i class="none"></i>
        How to generate Image sprites with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseJawrToGenerateBase64Image.html" title="How to generate base64 images in CSS with Jawr">
          <i class="none"></i>
        How to generate base64 images in CSS with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToUseGoogleClosureCompiler.html" title="How to use Google Closure Compiler with Jawr">
          <i class="none"></i>
        How to use Google Closure Compiler with Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToSetJsEngine.html" title="How to set Javascript engine in Jawr">
          <i class="none"></i>
        How to set Javascript engine in Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/howToEnablePerformanceLogging.html" title="How to set performance logging in Jawr">
          <i class="none"></i>
        How to set performance logging in Jawr</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/faq_howto.html" title="FAQ-Howto">
          <i class="none"></i>
        FAQ-Howto</a>
            </li>
                
      <li>
  
                          <a href="../tutorials/libraries.html" title="Using popular libraries">
          <i class="none"></i>
        Using popular libraries</a>
            </li>
                
      <li>
  
                          <a href="../docs/sampleApplications.html" title="Sample applications">
          <i class="none"></i>
        Sample applications</a>
            </li>
                              <li class="nav-header">API and sources</li>
                              
      <li>
  
                          <a href="../nonav/apidocs/index.html" title="JavaDocs">
          <i class="none"></i>
        JavaDocs</a>
            </li>
                
      <li>
  
                          <a href="../nonav/xref/index.html" title="Source XREF">
          <i class="none"></i>
        Source XREF</a>
            </li>
                              <li class="nav-header">Github repositories</li>
                              
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-main-repo" class="externalLink" title="Jawr main repository">
          <i class="none"></i>
        Jawr main repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-core" class="externalLink" title="Jawr core repository">
          <i class="none"></i>
        Jawr core repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-spring" class="externalLink" title="Jawr spring repository">
          <i class="none"></i>
        Jawr spring repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-wicket" class="externalLink" title="Jawr wicket repository">
          <i class="none"></i>
        Jawr wicket repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-grails" class="externalLink" title="Jawr grails repository">
          <i class="none"></i>
        Jawr grails repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-dwr2.x" class="externalLink" title="Jawr dwr2.x repository">
          <i class="none"></i>
        Jawr dwr2.x repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-dwr3.x" class="externalLink" title="Jawr dwr3.x repository">
          <i class="none"></i>
        Jawr dwr3.x repository</a>
            </li>
                
      <li>
  
                          <a href="https://github.com/j-a-w-r/jawr-tools" class="externalLink" title="Jawr tools repository">
          <i class="none"></i>
        Jawr tools repository</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Spring MVC integration<a name="Spring_MVC_integration"></a></h2>
<p>Jawr includes a Spring MVC Controller implementation which you can use instead of the usual Jawr servlet. This way, you can keep all your configuration in a single consistent format and benefit with the incredibly flexible configuration system that ships with Spring. The version supported is the 2.0.x version of spring MVC</p>
<p>Note that if you are new to Jawr, reading this guide alone will not suffice to understand how Jawr works, so do check out the rest of the documentation because here you will only find the instructions to plug it into Spring.</p>
<div class="section">
<h3>Basic configuration<a name="Basic_configuration"></a></h3>
<p>The first thing to do is to add the jawr-spring-extension module in your classpath. For maven users, you&#x2019;ll need to add the following dependency in your pom file :</p>

<div class="source">
<pre>    &lt;dependency&gt;
      &lt;groupId&gt;net.jawr.extensions&lt;/groupId&gt;
      &lt;artifactId&gt;jawr-spring-extension&lt;/artifactId&gt;
      &lt;version&gt;3.8&lt;/version&gt;
    &lt;/dependency&gt;
</pre></div>
<p>Assuming you have an up and running Spring web application, you will first need to add a bean definition for the class <i>net.jawr.web.servlet.JawrSpringController</i>. You will need an instance for each resource type (.js and .css), so it will be best if you declare an abstract bean and then you create two instances from it. Take a look at this full example and find all the details below:</p>

<div class="source">
<pre>&lt;!-- Base Jawr config --&gt;
&lt;bean abstract=&quot;true&quot; id=&quot;jawrBase&quot;  class=&quot;net.jawr.web.servlet.JawrSpringController&quot; &gt;
        &lt;!-- This must match the servlet-mapping to which the spring servlet is bound --&gt;
        &lt;property name=&quot;mapping&quot; value=&quot;/spring/&quot;/&gt;
        &lt;property name=&quot;configLocation&quot; value=&quot;/jawr.properties&quot; /&gt;
        &lt;property name=&quot;configuration&quot;&gt;
        &lt;props&gt;
                &lt;prop&gt;key=&quot;jawr.debug.on&quot;&gt;false&lt;/prop&gt;
                        &lt;prop key=&quot;jawr.gzip.on&quot;&gt;true&lt;/prop&gt; 
                &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;!-- JS controller --&gt;
&lt;bean id=&quot;jawrJsController&quot; parent=&quot;jawrBase&quot; /&gt;

&lt;!-- CSS controller --&gt;
&lt;bean id=&quot;jawrCSSController&quot; parent=&quot;jawrBase&quot;&gt;
        &lt;property name=&quot;type&quot; value=&quot;css&quot; /&gt;
&lt;/bean&gt;
</pre></div>
<p>As you can see, the abstract bean holds most of the configuration details, which is common to both Jawr controllers. The properties which are being set configure the controllers in the following way:</p>

<ul>
  
<li><b>mapping</b> is needed only if the dispatcher servlet is mapped to some subpath in the server (i.e., anything other than /*). So if the spring servlet-mapping property has a value of &#x2018;/spring/*&#x2019;, the mapping attribute should be &#x2018;/spring/&#x2019; (without the &#x2018;*&#x2019;).</li>
  
<li><b>configLocation</b> is a location of the Jawr configuration file. Check the descriptor syntax page for an overview of what goes here.</li>
  
<li><b>type</b> tells the controller whether it is serving .js or .css files. Since by default .js is assumed, you only need to set it at the CSS controller declaration.</li>
</ul>
<p>There are two additional properties you might need to set:</p>

<ul>
  
<li><b>configPropertiesSourceClass</b>: This optional parameter holds the qualified class name of you custom implementation of ConfigPropertiesSource, in case you want to customize the way configuration is loaded when Jawr starts up. Now, this doesn&#x2019;t make much sense when using Spring, since it already makes config loading much more flexible, but since this is available when using the servlet it doesn&#x2019;t hurt to make it available for Spring users as well.</li>
  
<li><b>controllerMapping</b>: Depending on how you map the controllers, you might need to set this property. See below for more info.</li>
  
<li><b>configuration</b> is a Properties object holding the usual Jawr configuration values. If the <i>configLocation</i> property is defined, this property is used to override the values found in the properties defined at the <i>configLocation</i>. If the <i>configLocation</i> property is not set, then this property is used for the jawr properties. If you use reload feature by defining the <i>jawr.config.reload.interval</i> property, and if you use <i>configLocation</i> and <i>configuration</i> properties, then for any change in the file defined at the <i>configLocation</i>, the standard Jawr bundling process will happen. Jawr will reload with the new values of the file and the configuration property will override the value set in the file.</li>
</ul>
<p>Check the descriptor syntax page for an overview of what can be  specified for the properties.</p></div>
<div class="section">
<h3>Mapping the controllers<a name="Mapping_the_controllers"></a></h3>
<p>Once you have set up the controllers to your liking, you need to add mappings in the URL handler mapping bean of the servlet. The simplest and possibly best form to do it is to simply map all .js or .css requests to the controllers:</p>

<div class="source">
<pre>&lt;bean id=&quot;urlMapping&quot;
          class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;
         &lt;property name=&quot;mappings&quot;&gt;
          &lt;props&gt;
          &lt;prop key=&quot;/**/*.js&quot;&gt;jawrJsController&lt;/prop&gt;
          &lt;prop key=&quot;/**/*.css&quot;&gt;jawrCSSController&lt;/prop&gt;
          &lt;prop key=&quot;/**/*.jpg&quot;&gt;jawrCSSController&lt;/prop&gt;
          &lt;prop key=&quot;/**/*.png&quot;&gt;jawrCSSController&lt;/prop&gt;
          &lt;/props&gt;
         &lt;/property&gt;
&lt;/bean&gt;
</pre></div>
<p>You may have noticed the *.jpg and *.png mappings in the example. The reason for adding these is to handle background images referenced in css files, when Jawr is in debug mode. This is due to a known problem which will be addressed in future versions.</p>
<p>If for some reason you need to add some kind of prefixing to the mappings, there is extra work to be done. For instance, if you mapped like this:</p>

<div class="source">
<pre>&lt;bean id=&quot;urlMapping&quot;
          class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;
         &lt;property name=&quot;mappings&quot;&gt;
          &lt;props&gt;
          &lt;prop key=&quot;/jawr/**/*.js&quot;&gt;jawrJsController&lt;/prop&gt;
          &lt;prop key=&quot;/jawr/**/*.css&quot;&gt;jawrCSSController&lt;/prop&gt;
          &lt;prop key=&quot;/jawr/**/*&quot;&gt;jawrCSSController&lt;/prop&gt;
          &lt;/props&gt;
         &lt;/property&gt;
&lt;/bean&gt;
</pre></div>
<p>For this configuration, you will need to let the controllers know the extra path information. The reason for this is that Jawr needs not only to attend to requests, but also to generate URLs which will match its own controllers (incidentally, that&#x2019;s the same reason to need the <i>mapping</i> configuration attribute too). Note that the additional images mapping is simpler now, reduced to &#x2018;/jawr/**/*&#x2019; to cover all types. The <b>controllerMapping</b> configuration attribute comes into play under this configuration. You will need to set it with the value of the additional prefixing:</p>

<div class="source">
<pre>&lt;!-- Base Jawr config --&gt;
&lt;bean abstract=&quot;true&quot; id=&quot;jawrBase&quot;  class=&quot;net.jawr.web.servlet.JawrSpringController&quot; &gt;
        &lt;!-- This must match the servlet-mapping to which the spring servlet is bound --&gt;
        &lt;property name=&quot;mapping&quot; value=&quot;/spring/&quot;/&gt;

        &lt;!-- This must match the controller mapping prefix to which the 
                        jawr controllers are bound at the urlMapping bean  --&gt;
        &lt;property name=&quot;controllerMapping&quot; value=&quot;/jawr/&quot;/&gt;


        &lt;property name=&quot;configuration&quot;&gt;
                &lt;util:properties location=&quot;classpath:jawr.properties&quot;/&gt;
        &lt;/property&gt;
&lt;/bean&gt;
</pre></div>
<p>With controllers in place and mappings set, you are ready to start using the Jawr tag library in your pages to get really fast loading times.</p></div>
<div class="section">
<h3>Using Spring&#x2019;s LocaleResolver with the i18n generator.<a name="Using_Springs_LocaleResolver_with_the_i18n_generator."></a></h3>
<p>If you will be using Spring&#x2019;s i18n facilities and want to generate 18n message scripts (check the 18n generator docs), you can integrate both systems by letting Jawr use Spring&#x2019;s LocaleResolver. Jawr has its own way of resolving the locale of a request and a bit of extra configuration is needed to have it delegate in Spring. Actually, this single line in your jawr.properties file will do:</p>

<div class="source">
<pre>jawr.locale.resolver=net.jawr.web.resource.bundle.locale.SpringLocaleResolver
</pre></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2017.
          All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
